{"filter":false,"title":"image.py","tooltip":"/faceutils/image.py","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":27,"column":36},"action":"insert","lines":["#   Copyright (c) 2020 PaddlePaddle Authors. All Rights Reserve.","#","# Licensed under the Apache License, Version 2.0 (the \"License\");","# you may not use this file except in compliance with the License.","# You may obtain a copy of the License at","#","#     http://www.apache.org/licenses/LICENSE-2.0","#","# Unless required by applicable law or agreed to in writing, software","# distributed under the License is distributed on an \"AS IS\" BASIS,","# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.","# See the License for the specific language governing permissions and","# limitations under the License.","","import numpy as np","import cv2","from io import BytesIO","","","def resize_by_max(image, max_side=512, force=False):","    h, w = image.shape[:2]","    if max(h, w) < max_side and not force:","        return image","    ratio = max(h, w) / max_side","","    w = int(w / ratio + 0.5)","    h = int(h / ratio + 0.5)","    return cv2.resize(image, (w, h))"],"id":1}]]},"ace":{"folds":[],"scrolltop":27,"scrollleft":0,"selection":{"start":{"row":27,"column":36},"end":{"row":27,"column":36},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":409,"mode":"ace/mode/python"}},"timestamp":1705476481504,"hash":"b31c49da467a565c3b9eb108db55aa8c6fb8c27e"}